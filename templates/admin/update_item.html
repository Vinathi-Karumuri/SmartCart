{% extends "base.html" %}
{% block content %}

<div class="card" style="max-width: 500px;">

    <h2>Update Product</h2>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% for category, message in messages %}
        <p class="flash {{ category }}">{{ message }}</p>
      {% endfor %}
    {% endwith %}

    <form method="POST"
          action="/admin/update-item/{{ product.product_id }}"
          enctype="multipart/form-data"
          style="text-align:left;">

        <label>Product Name</label>
        <input type="text" name="name" value="{{ product.name }}" required>

        <label>Description</label>
        <textarea name="description" required>{{ product.description }}</textarea>

        <label>Category</label>
        <input type="text" name="category" value="{{ product.category }}" required>

        <label>Price</label>
        <input type="number" step="0.01" name="price" value="{{ product.price }}" required>

        <label>Current Image</label>
        <div style="margin:10px 0;">
            <img src="{{ url_for('static', filename='uploads/product_images/' ~ product.image) }}"
                 width="120"
                 style="border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,0.2);">
        </div>

        <label>Choose New Image (optional)</label>
        <input type="file" name="image" accept="image/*">

        <button type="submit" style="margin-top:15px;">
            Update Product
        </button>
    </form>

    <div style="margin-top:20px;">
        <a href="/admin/item-list" class="btn-back">â¬… Back to Product List</a>
    </div>

</div>

{% endblock %}